---
title: '実験7 HTTPプロトコル分析と測定'
published: 2022-07-01
updated: 2022-07-01
description: '本実験は、HTTPプロトコルとそのメッセージ構造を理解し、tcpdumpとWiresharkを用いたHTTPパケットの取得・解析を習得することを目的としています。新疆大学のホームページをダウンロードし、HTTPバージョン、IPアドレス、ステータスコード、コンテンツバイト数、ヘッダフィールドを解析します。実験中に発生した接続エラーも解決し、プログラミング能力とHTTPプロトコルへの理解を高めました。'
image: 'https://r2.dreaife.tokyo/notion/covers/70ae8f6e946948d7839c6e2b781e11aa/165371EE8BB9E99C4121DDB4A9C0DE46.jpg'
tags: ['network', 'school']
category: 'cs-base'
draft: false
lang: 'ja'
---

# **1．実験目的**

- HTTPプロトコルおよびそのメッセージ構造を理解する
- HTTP操作の過程を理解する：TCPの三者ハンドシェーク、リクエストとレスポンスのやり取りを理解する
- `tcpdump`と`wireshark`のソフトウェアを用いたHTTPデータパケットのキャプチャと解析技術を習得する

## **2．実験環境**

- ハードウェア要件：Alibaba Cloud の ECS を1台。
- ソフトウェア要件：Linux/Windows オペレーティングシステム

## **3．実験内容**

wgetを使用して新疆大学のトップページ**[**[www.xju.edu.cn](https://www.notion.so/dreaifenote/www.xju.edu.cn)**](**[**http://www.xju.edu.cn**](http://www.xju.edu.cn/)**)**を利用して、`tcpdump`でパケットをキャプチャして、`wireshark`で解析します。

1. ブラウザはHTTPバージョン1か1.1で動作しますか？サーバーはどのHTTPバージョンを動作させていますか？
2. あなたのPCのIPアドレスは何ですか？サーバーのIPは？
3. サーバーからブラウザへ返されたステータスコードは何ですか？
4. サーバー上で取得したHTMLファイルはいつ更新されましたか？
5. ブラウザへ返された内容のバイト数はいくつですか？
6. 上記ですでに回答したフィールド以外、ヘッダにはどんなフィールドがありますか？データパケットの内容ウィンドウで生データを確認すると、データパケットリストには表示されていないヘッダはありますか？

## **4．実験結果と分析**

### **1. 新疆大学のトップページのダウンロードとパケットキャプチャ**

![IFScZVzToMAhDnd.png](https://s2.loli.net/2022/06/07/IFScZVzToMAhDnd.png)

### **2. 抽出したファイルを`wireshark`で分析する**

### **2.1 HTTPプロトコルのフィルタリング**

![cVTMD8wmz9RJyNG.png](https://s2.loli.net/2022/06/07/cVTMD8wmz9RJyNG.png)

パケットキャプチャの結果から、クライアントがサーバーに単純なHTMLファイルをリクエストし、サーバーがそのファイルをクライアントへ返すことが分かる。

### **2.2 質問への回答**

> ブラウザが使用するHTTPバージョンは1か1.1ですか？サーバーが使用しているHTTPのバージョンは何ですか？ブラウザが使用しているHTTPバージョンは1.1、サーバーが使用しているHTTPのバージョンも1.1です。サーバーからブラウザへ返された状態コードは何ですか？返された状態コードは200で、リクエストの処理が成功したことを示します。サーバー上で取得したHTMLファイルはいつ更新されましたか？時刻はTue, 07 Jun 2022 07:02:12 GMTです。ブラウザへ返された内容のバイト数はいくつですか？0バイトの内容がブラウザへ返されました。上記ですでに回答したフィールド以外、ヘッダにはどんなフィールドがありますか？データパケットの内容ウィンドウで生データを確認すると、パケットリストには表示されていないヘッダはありますか？ HTTPリクエストメッセージにはHostフィールド、Connectionフィールド、Acceptフィールド、User-Agentフィールド、Accept-Encodingフィールドなどがあります。HTTPレスポンスメッセージにはServerフィールド、Connectionフィールドなどがあります。

## **5．実験のまとめ**

### **5.1 問題と解決策**

> Xftpを使用してサーバへ接続する際、接続エラーが発生しました。解決策としてキャンパス内ネットワークに接続した後、正常に戻りました。原因を調査の結果、サーバのファイアウォールが原因であることが分かりました。

### **5.2 感想と考察**

- 本実験レポートは、HTTPプロトコル分析の過程におけるコードおよびソフトウェアの操作に慣れ、授業で学んだ知識の検証を実現しました。今回の実験を通じて、wgetコマンドの使用手順を具体的に習得し、一般的なHTTPプロトコル分析ソフトウェアの基本的な使い方を理解し、自己のプログラミング能力を向上させました。
- これらの一般的なHTTP分析コマンドの操作を通じて、HTTPプロトコルの使用時の追跡分析、HTTPメッセージの構造分析を通じて、授業で学んだ知識を裏付けました。